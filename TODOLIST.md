# プレイヤーのアイテムの認知・選択・実行・登録のシステム

## 完成後のストーリー
1. プレイヤーは自身の位置から近くにあるゲームワールド内のアイテムやドア・オブジェクトを認識できる
2. さらにそのオブジェクトのいくつかを選択することができる。
3. テイクボタン(UI)が押されると選択状態のオブジェクトによって決められた挙動を実行できる(例えばドアなら開く・閉じる、レバーを下げる・上げるなど).
5. その後そのオブジェクトがアイテムインベントリに追加可能であるなら追加し、追加されたときのオブジェクトの挙動が実行される。例えばパッシブスキルの影響を受けるなど
6. 登録が成功したらそのゲームオブジェクトの後処理を行う

## 必要になる機能
### 非ゲームオブジェクト
- [ ] ワールド空間内オブジェクトの認識・非認識機能 
- [ ] 認識されたオブジェクトの選択・選択解除機能 
- [ ] 選択中のオブジェクトを取得する機能
- [ ] アイテムインベントリのCRUD機能
- [ ] この一連のシステムを管理する機能

### ワールド内ゲームオブジェクト
- [ ] 認識・非認識時の挙動
- [ ] 選択・選択解除時の挙動
- [ ] 取得時に取得される方向による挙動
- [ ] アイテムインベントリの読み込み・登録・追加・削除時の挙動

## 各機能の細かい仕様
### 選択機能
- [x] 選択機能によって得られる選択中のオブジェクトの配列は検索機能による結果の部分集合
- [ ] 現在選択中のオブジェクトたちは機能提供クラス側で保持する
- [ ] 選択中オブジェクトのRead Update Delete機能が外部から仕様できる
- [ ] Updateは選択メソッドに対応する
- [ ] Deleteは配列内からオブジェクトを削除する行為
### 取得機能
- [ ] idに対応する選択中のオブジェクトの取得時のメソッドを呼び出す
- [ ] 取得機能には成功と失敗がある
- [ ] 取得成功時,取得対象のオブジェクトが選択対象から外れ取得時メソッドが呼ばれる
> 取得機能が選択中の配列の参照を知らなければならない
> 取得機能に選択機能をメンバメソッドとして内包させるか？
- [ ] 失敗時は選択対象のまま取得時のメソッドは呼ばれない
## 必要になるテストの概要
### 非ゲームオブジェクト
- [ ] 認識・非認識機能を使用したときにゲームオブジェクトの対応するメソッドが呼び出されるか？
- [ ] 認識機能を使用したときに認識されたオブジェクトの配列を取得できるか？
- [ ] 非認識機能使用時に現在の認識対象が減っているか？
- [ ] 選択・選択解除機能を使用したときに選択・選択解除時の振る舞いが呼び出されるか？
- [ ] 選択中のオブジェクトを配列として受け取ることができるか？
- [ ] 選択解除のオブジェクトを配列として受け取ることができるか？
- [ ] 取得機能を使用したときに対象のオブジェクトの取得時の振る舞いが呼び出されるか？
- [ ] アイテムインベントリのCRUD機能それぞれを実行したときに対応したメソッドを呼び出すか？
- [ ] この一連のシステムの管理者が各機能を実行するか?

### ワールド内ゲームオブジェクト
- [ ] 認識・非認識時の挙動
- [ ] 選択・選択解除時の挙動
- [ ] 取得されるオブジェクトの挙動
- [ ] アイテムの登録・追加・削除時の挙動


## その他の実装にける雑念
- [ ] Managerが各機能を実行するから認識・非認識機能の結果を受け取る必要がある
> どうやって結果を受け取るか？
> 認識機能の結果をメンバ変数として保持しておくか？
> 認識・非認識機能を提供するクラスが同一ならManagerに直接保持するのではなく機能を提供するクラスで保持しておいた方が良さそう
> Managerは機能を提供するクラスのメンバ変数を参照する形で結果を受け取るほうが良さそう?
- [ ] 認識機能の実装はゲームの要件によって変更できるようにした方がよいか？
> そうする場合どのようなインタフェースが良いか？
> 検索の方法は実装による
> 返り値はどうするか？引数はどうするか?
> 検索結果のフィルタリングは結果を受け取る側で行えばよい
- [ ] 非認識機能の実装はどうすればよいか？
> 認識機能の結果の配列にフィルターを通して得られたGameObjectの配列？
> その結果がそのあと使用されないなら返り値は不要か？
> 非認識機能を実行することで認識対象が減る必要がある
> 実行時に条件式を渡して,それに当てはまるGameObjectを認識対象の配列から外したほうが良いか?
> その場合,非認識機能の内部で現在の認識対象の配列の参照を知る必要がある
> ~~認識機能を実行するときにフィルターを通せば良いのでは？~~
> 認識機能の結果をフィルタリングすれば良いのでは?
> 以前の認識オブジェクトの配列と新しい認識対象オブジェクトの配列の差分を非認識オブジェクトとするか?

- [ ] 選択解除時の実装はどうするべきか?
- [ ] 一度に取得できる量は一つにした方がよいか、外部から変更可能にしたほうがよいか？
- [ ] 取得の方法は動的に変化できた方が良いか？
- [ ] 
- [ ] アイテムインベントリだけじゃなくレアアイテム発見による達成の証の解放のためにアイテム全体のデータベースを作ったほうがよいか？

